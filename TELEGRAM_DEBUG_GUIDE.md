# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ –ø—Ä–æ–±–ª–µ–º —Å Telegram-–±–æ—Ç–æ–º

## –ü—Ä–æ–±–ª–µ–º–∞ 1: –¢–æ–∫–µ–Ω –∏—Å—á–µ–∑–∞–µ—Ç –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

### –ü—Ä–∏—á–∏–Ω–∞
–¢–æ–∫–µ–Ω –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ –ø–æ–ª–µ –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è.

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–∫–µ–Ω–∞ –≤ –ø–æ–ª–µ `telegram-bot-token` –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚úÖ –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `loadTelegramSettings()` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI
‚úÖ –¢–æ–∫–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∏–∑ —Å–µ—Ä–≤–µ—Ä–∞ –≤ –ø–æ–ª–µ `data.botToken`

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ "–¢–æ–∫–µ–Ω –±–æ—Ç–∞ –∑–∞–≥—Ä—É–∂–µ–Ω –≤ –ø–æ–ª–µ"
4. –ü–æ–ª–µ –¥–æ–ª–∂–Ω–æ –æ—Å—Ç–∞—Ç—å—Å—è –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º

## –ü—Ä–æ–±–ª–µ–º–∞ 2: –°—Ç–∞—Ç—É—Å "–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ"

### –ü—Ä–∏—á–∏–Ω–∞
–°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ –Ω–∞–ª–∏—á–∏—é `telegram_id`, –Ω–æ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç, —á—Ç–æ –≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –±–æ—Ç—É.

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–ø–æ–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–ª–∞–¥–µ–ª–µ—Ü –æ—Ç–ø—Ä–∞–≤–∏–ª —Å–≤–æ–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ –±–æ—Ç–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ë–î: `users.telegram_id` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω

### –®–∞–≥–∏ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü–æ–¥–∫–ª—é—á–∏—Ç—å Telegram"
2. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start connect`
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç"
5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–≤–æ–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
6. –ë–æ—Ç –Ω–∞–π–¥–µ—Ç –≤–∞—Å –ø–æ –Ω–æ–º–µ—Ä—É –∏ –ø—Ä–∏–≤—è–∂–µ—Ç `telegram_id`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î
```sql
SELECT id, username, salon_phone, telegram_id, bot_token 
FROM users 
WHERE role = 'admin' OR username = 'admin';
```

## –ü—Ä–æ–±–ª–µ–º–∞ 3: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

#### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞
- –û—Ç–∫—Ä–æ–π—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
- –ù–∞–π–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: `üìã –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Telegram`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: `botTokenInDb: true` –∏ `botTokenLength: > 0`

#### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤–ª–∞–¥–µ–ª—å—Ü–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ë–î: `users.telegram_id` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ë–î: `users.salon_phone` –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –Ω–æ–º–µ—Ä–æ–º, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º –≤ –±–æ—Ç–µ

#### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏
- –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–ø–∏—Å—å
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ `üîî –û—Ç–ø—Ä–∞–≤–∫–∞ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ `üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–ª–∞–¥–µ–ª—å—Ü–µ: telegram_id=...`

#### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å `telegram-bot` –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ `üì® –ü–æ–ª—É—á–µ–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ `‚úÖ –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –ø–æ–ª—É—á–µ–Ω`

#### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `TELEGRAM_BOT_URL` –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–µ—Ä–≤–∏—Å–µ
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `http://telegram-bot:3001`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ `üîó URL –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞: ...`

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

1. **"–¢–æ–∫–µ–Ω –±–æ—Ç–∞ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω"**
   - –†–µ—à–µ–Ω–∏–µ: –£–∫–∞–∂–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ –ø–æ–ª–µ –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `TELEGRAM_BOT_TOKEN`

2. **"–£ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Å–∞–ª–æ–Ω–∞ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω Telegram"**
   - –†–µ—à–µ–Ω–∏–µ: –í–ª–∞–¥–µ–ª–µ—Ü –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–≤–æ–π –Ω–æ–º–µ—Ä –≤ –±–æ—Ç–µ

3. **"–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–º"**
   - –†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω

4. **"–¢–∞–π–º–∞—É—Ç –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—É"**
   - –†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç—å –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

## –õ–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä (server.js)
```
üìû –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–ª—è userId=X: +998903175512
üîî –û—Ç–ø—Ä–∞–≤–∫–∞ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–ª–∞–¥–µ–ª—å—Ü—É —Å–∞–ª–æ–Ω–∞: salonOwnerId=X
üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–ª–∞–¥–µ–ª—å—Ü–µ: userId=X, telegram_id=123456789
üì§ –í—ã–∑–æ–≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ Telegram –±–æ—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
üîó URL –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞: http://telegram-bot:3001/api/bot/send-notification
üì• –û—Ç–≤–µ—Ç –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞: status=200, success=true
‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤–ª–∞–¥–µ–ª—å—Ü—É —Å–∞–ª–æ–Ω–∞
```

### –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å Telegram-–±–æ—Ç–∞ (telegram-bot.js)
```
üì® –ü–æ–ª—É—á–µ–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: telegramId=123456789
üîë –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞...
‚úÖ –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –ø–æ–ª—É—á–µ–Ω (–¥–ª–∏–Ω–∞: 46 —Å–∏–º–≤–æ–ª–æ–≤)
‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ telegramId=123456789
```

## –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

1. **–¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω?**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–µ "–¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞" - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–æ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –ø–æ–¥ –ø–æ–ª–µ–º: "‚úÖ –¢–æ–∫–µ–Ω –Ω–∞—Å—Ç—Ä–æ–µ–Ω"

2. **–í–ª–∞–¥–µ–ª–µ—Ü –ø–æ–¥–∫–ª—é—á–µ–Ω?**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "–ü–æ–¥–∫–ª—é—á–µ–Ω–æ" (–∑–µ–ª–µ–Ω—ã–π)
   - –ï—Å–ª–∏ "–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ" - –Ω–∞–∂–º–∏—Ç–µ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å Telegram" –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º

3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç?**
   - –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–ø–∏—Å—å
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ –±–æ—Ç–∞

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
docker ps | grep telegram-bot
docker logs beauty-studio-telegram-bot --tail 50
docker logs beauty-studio --tail 50
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
SELECT id, username, bot_token, LENGTH(bot_token) as token_length 
FROM users 
WHERE role = 'admin' OR username = 'admin';

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤–ª–∞–¥–µ–ª—å—Ü–∞
SELECT id, username, salon_phone, telegram_id 
FROM users 
WHERE telegram_id IS NOT NULL;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å–µ–π
SELECT id, user_id, name, phone, date, time 
FROM bookings 
ORDER BY created_at DESC 
LIMIT 5;
```

