# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Debug —Ä–µ–∂–∏–º–∞

## ‚úÖ –í–∫–ª—é—á–µ–Ω Debug —Ä–µ–∂–∏–º –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
- `LOG_LEVEL=DEBUG` - –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (shared/logger.js)
- `DEBUG=*` - –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è Node.js –º–æ–¥—É–ª–µ–π

–ü—Ä–∏–º–µ–Ω–µ–Ω–æ –¥–ª—è –≤—Å–µ—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤:
- ‚úÖ **gateway** - API Gateway
- ‚úÖ **auth-service** - –°–µ—Ä–≤–∏—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ **user-service** - –°–µ—Ä–≤–∏—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ **booking-service** - –°–µ—Ä–≤–∏—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- ‚úÖ **catalog-service** - –°–µ—Ä–≤–∏—Å –∫–∞—Ç–∞–ª–æ–≥–∞
- ‚úÖ **file-service** - –°–µ—Ä–≤–∏—Å —Ñ–∞–π–ª–æ–≤
- ‚úÖ **notification-service** - –°–µ—Ä–≤–∏—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ **telegram-service** - –°–µ—Ä–≤–∏—Å Telegram

–¢–∞–∫–∂–µ –≤–∫–ª—é—á–µ–Ω debug —Ä–µ–∂–∏–º –¥–ª—è **Redis**: `--loglevel debug`

## üìä –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### DEBUG (–≤–∫–ª—é—á–µ–Ω)
- –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –≤–∫–ª—é—á–∞—è –¥–µ—Ç–∞–ª—å–Ω—É—é –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- –ó–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã
- –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Å—Å–∏–π
- –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### INFO (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ production)
- –û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –°—Ç–∞—Ä—Ç/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

### WARN
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- –ù–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏
- Fallback –æ–ø–µ—Ä–∞—Ü–∏–∏

### ERROR
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
- –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

## üîß –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –î–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ —Å shared/logger.js (gateway)
–õ–æ–≥–≥–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `LOG_LEVEL=DEBUG` –∏ –≤—ã–≤–æ–¥–∏—Ç:
- –í **development** (NODE_ENV=development): —Ü–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å
- –í **production** (NODE_ENV=production): JSON —Ñ–æ—Ä–º–∞—Ç –¥–ª—è —Å–∏—Å—Ç–µ–º —Å–±–æ—Ä–∞ –ª–æ–≥–æ–≤

### –î–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ –±–µ–∑ shared/logger.js
–í—Å–µ `console.log`, `console.error`, `console.warn` –±—É–¥—É—Ç –≤—ã–≤–æ–¥–∏—Ç—å—Å—è –≤ –ª–æ–≥–∏ Docker.

### DEBUG=* –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è
–í–∫–ª—é—á–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è Node.js –º–æ–¥—É–ª–µ–π:
- HTTP –∑–∞–ø—Ä–æ—Å—ã/–æ—Ç–≤–µ—Ç—ã (–µ—Å–ª–∏ –º–æ–¥—É–ª—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç)
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (pg, –µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç)
- Redis —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- Express middleware
- –ò –¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π debug

**–í–Ω–∏–º–∞–Ω–∏–µ**: `DEBUG=*` –º–æ–∂–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å **–æ—á–µ–Ω—å –º–Ω–æ–≥–æ** –ª–æ–≥–æ–≤!

## üìù –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

### –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã:
```bash
docker-compose -f docker-compose.microservices.yml logs -f
```

### –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å:
```bash
# Gateway
docker-compose -f docker-compose.microservices.yml logs -f gateway

# Auth Service
docker-compose -f docker-compose.microservices.yml logs -f auth-service

# User Service
docker-compose -f docker-compose.microservices.yml logs -f user-service
```

### –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫:
```bash
docker-compose -f docker-compose.microservices.yml logs --tail=100 gateway
```

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É—Ä–æ–≤–Ω—é (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è JSON –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ):
```bash
docker-compose -f docker-compose.microservices.yml logs gateway | grep '"level":"DEBUG"'
```

## ‚öôÔ∏è –û—Ç–∫–ª—é—á–µ–Ω–∏–µ Debug —Ä–µ–∂–∏–º–∞

–î–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è debug —Ä–µ–∂–∏–º–∞:

1. **–í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ** (—á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è):
```bash
LOG_LEVEL=INFO docker-compose -f docker-compose.microservices.yml up -d
```

2. **–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ**:
   - –ò–∑–º–µ–Ω–∏—Ç–µ `LOG_LEVEL=DEBUG` –Ω–∞ `LOG_LEVEL=INFO` –≤ `docker-compose.microservices.yml`
   - –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤ `.env` —Ñ–∞–π–ª–µ: `LOG_LEVEL=INFO`

## üéØ –ß—Ç–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ DEBUG —Ä–µ–∂–∏–º–µ

### Gateway:
- –í—Å–µ –≤—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã (–º–µ—Ç–æ–¥, –ø—É—Ç—å, IP, userId)
- –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Å—Å–∏–π (sessionID, userId, cookies)
- –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ (—Ü–µ–ª–µ–≤–æ–π —Å–µ—Ä–≤–∏—Å, –∑–∞–≥–æ–ª–æ–≤–∫–∏)
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–µ—Å—Å–∏–π
- –û—Ç–≤–µ—Ç—ã –æ—Ç —Å–µ—Ä–≤–∏—Å–æ–≤ (—Å—Ç–∞—Ç—É—Å –∫–æ–¥)
- –û—à–∏–±–∫–∏ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è

### Auth Service:
- –ü–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞ (username)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª–µ–π
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π
- –û—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### User Service:
- –ó–∞–ø—Ä–æ—Å—ã –∫ API
- –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –î—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã:
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- HTTP –∑–∞–ø—Ä–æ—Å—ã
- –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: DEBUG —Ä–µ–∂–∏–º –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç **–æ—á–µ–Ω—å –º–Ω–æ–≥–æ** –ª–æ–≥–æ–≤, —á—Ç–æ –º–æ–∂–µ—Ç:
   - –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –∑–∞–º–µ–¥–ª–∏—Ç—å —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –ë—ã—Å—Ç—Ä–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∏—Å–∫ –ª–æ–≥–∞–º–∏ (–≥–∏–≥–∞–±–∞–π—Ç—ã –≤ –¥–µ–Ω—å)
   - –£–≤–µ–ª–∏—á–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ CPU –∏ I/O
   - –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä Docker –ª–æ–≥–æ–≤

2. **DEBUG=*** –≤–∫–ª—é—á–∞–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö Node.js –º–æ–¥—É–ª–µ–π, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω–æ

2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í DEBUG –ª–æ–≥–∞—Ö –º–æ–≥—É—Ç –±—ã—Ç—å:
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ß–∞—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø—É—Ç–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

3. **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ DEBUG —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
   - –í production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `LOG_LEVEL=INFO` –∏–ª–∏ `LOG_LEVEL=WARN`
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥–æ–≤
   - –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ –ª–æ–≥–∏ —Å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

## üîÑ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `docker-compose.microservices.yml`:

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose -f docker-compose.microservices.yml up -d

# –ò–ª–∏ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose -f docker-compose.microservices.yml up -d --build
```

